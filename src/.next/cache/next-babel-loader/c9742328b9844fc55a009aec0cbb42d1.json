{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/refreshMe/frontRefreshme/src/pages/users.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { Formik } from 'formik';\nimport USERS from '@graphql/users/queries/usersQuery';\nimport CREATE_USER, { updateCacheAfterCreateUser } from '@graphql/users/mutations/createUserMutation';\nimport DELETE_USER, { updateCacheAfterDeleteUser } from '@graphql/users/mutations/deleteUserMutation';\n\nvar Users = function Users() {\n  var _useQuery = useQuery(USERS),\n      data = _useQuery.data,\n      loading = _useQuery.loading;\n\n  var _useMutation = useMutation(CREATE_USER, {\n    update: updateCacheAfterCreateUser\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createUser = _useMutation2[0],\n      responseUser = _useMutation2[1].data;\n\n  var _useMutation3 = useMutation(DELETE_USER, {\n    update: updateCacheAfterDeleteUser\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      deleteUser = _useMutation4[0];\n\n  if (loading) return __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, \"loading...\");\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, data.users.users.map(function (user) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      key: user.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, user.name), __jsx(\"button\", {\n      onClick: function onClick() {\n        return deleteUser({\n          variables: {\n            email: user.email\n          }\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }, \"delete user\"));\n  }), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, \"users\"), __jsx(Formik, {\n    initialValues: {\n      email: '',\n      password: '',\n      name: ''\n    },\n    validate: function validate(values) {\n      var errors = {};\n\n      if (!values.email) {\n        errors.email = 'Required';\n      } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) {\n        errors.email = 'Invalid email address';\n      } else if (!values.password) {\n        errors.password = 'Required';\n      } else if (!values.name) {\n        errors.name = 'Required';\n      }\n\n      return errors;\n    },\n    onSubmit: function _callee(values, _ref) {\n      var setSubmitting;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSubmitting = _ref.setSubmitting;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(createUser({\n                variables: {\n                  userInput: _objectSpread({}, values)\n                }\n              }));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, function (_ref2) {\n    var values = _ref2.values,\n        errors = _ref2.errors,\n        touched = _ref2.touched,\n        handleChange = _ref2.handleChange,\n        handleBlur = _ref2.handleBlur,\n        handleSubmit = _ref2.handleSubmit,\n        isSubmitting = _ref2.isSubmitting;\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), errors.email && touched.email && errors.email, __jsx(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), errors.password && touched.password && errors.password, __jsx(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), errors.name && touched.name && errors.name, __jsx(\"button\", {\n      type: \"submit\",\n      disabled: isSubmitting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Submit\"));\n  })));\n};\n\nexport default Users;","map":{"version":3,"sources":["/Users/mac/Desktop/refreshMe/frontRefreshme/src/pages/users.jsx"],"names":["React","useQuery","useMutation","Formik","USERS","CREATE_USER","updateCacheAfterCreateUser","DELETE_USER","updateCacheAfterDeleteUser","Users","data","loading","update","createUser","responseUser","deleteUser","users","map","user","email","name","variables","password","values","errors","test","setSubmitting","userInput","touched","handleChange","handleBlur","handleSubmit","isSubmitting"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { Formik } from 'formik';\n\nimport USERS from '@graphql/users/queries/usersQuery';\nimport CREATE_USER, { updateCacheAfterCreateUser } from '@graphql/users/mutations/createUserMutation';\nimport DELETE_USER, { updateCacheAfterDeleteUser } from '@graphql/users/mutations/deleteUserMutation';\n\nconst Users = () => {\n  const { data, loading } = useQuery(USERS);\n  const [createUser, { data: responseUser }] = useMutation(CREATE_USER, { update: updateCacheAfterCreateUser });\n  const [deleteUser] = useMutation(DELETE_USER, { update: updateCacheAfterDeleteUser });\n\n  if (loading) return <p>loading...</p>\n  return (\n    <div>\n      {data.users.users.map(user =>\n        <div>\n          <p key={user.email}>{user.name}</p>\n          <button onClick={ () => deleteUser({ variables: { email: user.email }})}>delete user</button>\n        </div>\n      )}\n      <div>\n      <h1>users</h1>\n      <Formik\n        initialValues={{ email: '', password: '', name: '' }}\n        validate={values => {\n          const errors = {};\n          if (!values.email) {\n            errors.email = 'Required';\n          } else if (\n            !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n          ) {\n            errors.email = 'Invalid email address';\n          } else if (!values.password) {\n            errors.password = 'Required';\n          } else if (!values.name) {\n            errors.name = 'Required';\n          } \n          return errors;\n        }}\n        onSubmit={async (values, { setSubmitting }) => {\n          await createUser({ variables: { userInput: {\n            ...values\n          }},\n        })}}\n      >\n      {({\n        values,\n        errors,\n        touched,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n      }) => (\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"email\"\n            name=\"email\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n            value={values.email}\n          />\n          {errors.email && touched.email && errors.email}\n          <input\n            type=\"password\"\n            name=\"password\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n            value={values.password}\n          />\n          {errors.password && touched.password && errors.password}\n          <input\n            type=\"text\"\n            name=\"name\"\n            onChange={handleChange}\n            onBlur={handleBlur}\n            value={values.name}\n          />\n          {errors.name && touched.name && errors.name}\n          <button type=\"submit\" disabled={isSubmitting}>\n            Submit\n          </button>\n        </form>\n      )}\n      </Formik>\n    </div>\n    </div>\n  );\n}\n  \nexport default Users"]},"metadata":{},"sourceType":"module"}